= I: Set up your development environment
:page-supergroup-java-scala: Language

include::ROOT:partial$include.adoc[]


To follow tutorial steps you will need a code editor, a build tool, and `grpcurl` (a CLI for sending gRPC calls). You can use your preferred code editor. We provide the steps for using https://www.jetbrains.com/idea/[IntelliJ IDEA {tab-icon}, window="tab"] from JetBrains. For the [.group-scala]#Scala# [.group-java]#Java# version of the example, we use [.group-scala]#`sbt`# [.group-java]#`Apache Maven`# as the build tool.

This tutorial uses Cassandra and Kafka. You may run local installations during development, but we recommend running both services using https://docs.docker.com[Docker {tab-icon}, window="tab"]. The template project's root directory includes a https://docs.docker.com/compose/[Docker Compose] https://docs.docker.com/compose/[{tab-icon}, window="tab"] file that you can use to run Cassandra and Kafka. The provided Docker Compose file also runs Zookeeper which is required to run a Kafka broker.

The following sections provide links for downloading and installing:

* <<IntelliJ IDEA>>
* <<Build tool>>
* <<The grpcurl tool>>
* <<Docker and Docker Compose>>

We also provide downloadable versions of the example at different phases of completion. And, you will likely want to test locally before deploying to the cloud. You will need to understand how to configure to run locally. The following sections provide information on:

* <<Downloadable example source>>
* <<Configuring for local development>>
 

:!sectnums:
== IntelliJ IDEA

[.group-java]
Download and install https://www.jetbrains.com/idea/download/[IntelliJ {tab-icon}, window="tab"].

[.group-scala]
To install IntelliJ and prepare to develop the Scala example, follow these steps:

[.group-scala]
. Download and install https://www.jetbrains.com/idea/download/[IntelliJ {tab-icon}, window="tab"].
. From the *Preferences* menu, add the *Scala* plugin.


== Build tool

[.group-scala]
For the Scala Shopping Cart example, we use `sbt` as the build tool. https://www.scala-sbt.org/download.html[Install sbt] if you haven't already.

[TIP.group-scala]
====
`sbt` is an interactive shell. If you start it with the `sbt` command, you can repeatedly run tasks like `compile` and `test` in the sbt shell. In the tutorial we use the full command for clarity, such as `sbt compile`. You can run tasks independently in this way, but it's faster to leave the `sbt` shell running and only enter the tasks. For example:

----
$ sbt
...
sbt:shopping-cart-service> compile
...
sbt:shopping-cart-service> test
...
----
====

[.group--java]
For the Java Shopping Cart example, we use `Maven` as the build tool. http://maven.apache.org/install.html[Install Maven] if you haven't already.

== The grpcurl tool

The https://github.com/fullstorydev/grpcurl[grpcurl {tab-icon}, window="tab"] tool is useful for making gRPC calls from the command line. It is used in tutorial procedures and we recommend that you install it as described in https://github.com/fullstorydev/grpcurl#installation[the grpcurl documentation {tab-icon}, window="tab"].

== Docker and Docker Compose
[#docker]

See the instructions for installing https://docs.docker.com/get-docker/[Docker {tab-icon}, window="new"] and https://docs.docker.com/compose/install/[Docker Compose {tab-icon}, window="tab"] on your platform. 

== Downloadable example source

We encourage you to enter the example code, even if by copying and pasting. If you get stuck or prefer to skip some main steps, we provide source files for download. The introduction of each page with tutorial development steps includes links to two zip files: one with completed source up to that point, and one with completed source for the steps described on that page.

If you would like to run the full example, you can download the link:_attachments/6-shopping-cart-complete-scala.zip[full implementation]. In this case, we suggest you scan the tutorial instructions to identify the source files that you can learn from.


== Configuring for local development

By default, when using [.group-scala]#`sbt run`# [.group-java]#`mvn exec:exec`# the `Main` class will start an `ActorSystem` with `application.conf` which is the configuration intended to be used in production. When running Microservices locally each service must use unique Akka port numbers when running on the same machine.

To simplify the process of running multiple nodes locally, we've provided three configuration files named `local1.conf`, `local2.conf`, and `local3.conf` with the port values shown below. All of the local configuration files include `application.conf`.

You can override the configuration by passing one of the provided `local` configuration files to the build tool using a `-D` option.

Run one Akka Cluster node with `local1.conf` as follows:

[.group-java]
[source,shell script]
----
# make sure to compile before running exec:exec
mvn compile exec:exec -DAPP_CONFIG=local1.conf
----

[.group-scala]
[source,shell script]
----
sbt -Dconfig.resource=local1.conf run
----

Similarly, you can start two additional nodes with `local2.conf` and `local3.conf`:

[.group-java]
[source,shell script]
----
# make sure to compile before running exec:exec
mvn compile exec:exec -DAPP_CONFIG=local2.conf
mvn compile exec:exec -DAPP_CONFIG=local3.conf
----

[.group-scala]
[source,shell script]
----
sbt -Dconfig.resource=local2.conf run
sbt -Dconfig.resource=local3.conf run
----

The local configuration files set the following ports for each of the example services:

.shopping-cart-service ports
|===
|Node |Akka Cluster |Akka Management HTTP |Akka gRPC

|local1.conf
|2551
|9101
|8101

|local2.conf
|2552
|9102
|8102

|local3.conf
|2553
|9103
|8103

|===

.shopping-analytics-service ports
|===
|Node |Akka Cluster |Akka Management HTTP |Akka gRPC

|local1.conf
|3551
|9201
|-

|local2.conf
|3552
|9202
|-

|local3.conf
|3553
|9203
|-

|===

.shopping-order-service ports
|===
|Node |Akka Cluster |Akka Management HTTP |Akka gRPC

|local1.conf
|4551
|9301
|8301

|local2.conf
|4552
|9302
|8302

|local3.conf
|4553
|9303
|8303

|===
